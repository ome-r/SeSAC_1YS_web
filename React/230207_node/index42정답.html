<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Socket.io</title>
    <script
      src="https://cdn.socket.io/4.6.0/socket.io.min.js"
      integrity="sha384-c79GN5VsunZvi+Q/WObgk2in0CbZsHnjEqvFxC5DxHn9lTfNce2WW6h2pH6u/kF+"
      crossorigin="anonymous"
    ></script>
  </head>
  <body>
    <!-- <h2>Socket.io 사용하기</h2> -->
    <h2>Hello World!</h2>
    <!-- <button id="hello1" onclick="hello();">Hello</button>
    <button id="study1" onclick="study_click();">Study</button>
    <button id="bye1" onclick="bye_click();">Bye</button> -->

    <!-- 함수 하나로 하는법! -->
    <button id="hello1" onclick="btnSend('hello');">Hello</button>
    <button id="study1" onclick="btnSend('study');">Study</button>
    <button id="bye1" onclick="btnSend('bye');">Bye</button>

    <script>
      //메세지 보내기 : socket.emit("이벤트명", data)
      //메세지 받기 : socket.on("이벤트명", (data) =>) //보낸 데이터가 콜백함수 인자로 들어온다

      // 소켓 연결부 (클라이언트) : 클라이언트 소켓 생성 후 연결
      let socket = io.connect();

      // 이걸 사용한 순간, vscode와 크롬에서 둘다 서버연결 확인 가능
      // socket.on('connect', () => {
      //   console.log('server connected');
      // });

      // //   클라이언트 서버 주고받기
      // socket.on('welcome', (data) => {
      //   //data : {msg : ''}
      //   console.log(data.msg);
      //   // 답장하기 _ welcome이라는 메세지를 받았을때 보내주기 위해 같이 적음
      //   socket.emit('response', 'Hello');
      // });

      // const hello = () => {
      //   socket.emit('hello_e', 'hello!');
      // };
      // socket.on('response', (msg) => {
      //   console.log(msg);
      // });

      // 함수 하나걸어서 클릭이 되었을때 인자로 받은 문자열을 서버로 보냄
      const btnSend = (msg) => {
        socket.emit('send', msg);
      };
      // 서버에서 msg 값 받아서 출력
      socket.on('response', (msg) => {
        console.log(msg);
      });
    </script>
  </body>
</html>
